{"mappings":"AACA,IAAIA,EAAQ,KACZ,MAAMC,EAAS,IAAIC,gBAAgB,CACjCC,OAHU,mCAIVC,SAAU,UACVC,QAAS,KACTC,KAAM,EACNC,SAAU,KAGNC,EAAO,CACXC,oBAAqBC,SAASC,cAAc,cAC5CC,qBAAsBF,SAASC,cAAc,mBAC7CE,mBAAoBH,SAASC,cAAc,oBAC3CG,eAAgBJ,SAASC,cAAc,gBACvCI,KAAML,SAASC,cAAc,SAC7BK,YAAaN,SAASC,cAAc,gBACpCM,YAAaP,SAASC,cAAc,iBAcZ,SAAjBO,IACP,MAAMC,EAAeC,OAAOC,YACtBC,EAAYF,OAAOG,QACZf,EAAKM,eAAeU,aACrBF,EAAY,IAAMH,EAAiBG,EAAYH,IACzDlB,EAAOwB,IAAI,OAAQC,OAAOzB,EAAO0B,IAAI,SAAW,GAGhDC,EAAU3B,IAId,SAAS2B,EAAUC,GACjBC,MAAM,wCAAwCD,KAAUE,MAAKC,GAC3DA,EAASC,OAAOF,MAAKG,GAIzB,SAAmBC,GACjBC,aACED,EAAME,SAASC,QAAUrC,EAAO0B,IAAI,QAAU,GAAK1B,EAAO0B,IAAI,YAYtCY,EAXPH,aAWuBI,EAXTL,EAAMM,aAYvCjC,EAAKI,qBAAqB8B,YAAcH,EACxCC,IAAiBhC,EAAKK,mBAAmB6B,YAAcF,GAGpC,SAAGH,GACtB,MAAMM,EAAeN,EAASO,QAC5B,CAACC,EAAKC,IAAYD,EAMtB,UAAqBE,MACnBA,EAAKC,OACLA,EAAMC,WACNA,EAAUC,YACVA,EAAWC,YACXA,EAAWC,IACXA,IAEA,MAAO,gEAEyBA,wDAE1BH,EAAa,aAAaA,WAAoBC,YAAwB,iBAElEH,mCACcC,0CACQG,6BAtBNE,CAAYP,IACpC,IAEFtC,EAAKM,eAAewC,mBAAmB,YAAaX,GAnBpDY,CAAepB,EAAME,UAS4C,IAAvCE,EAAgBC,EARvBJ,cAAgBD,EAAMM,cAIvCe,cAAcxD,GAdeyD,CAAUvB,OA1B3C1B,EAAKO,KAAK2C,iBAAiB,UAE3B,SAAsBC,GACpBA,EAAEC,iBACFpD,EAAKM,eAAe+C,UAAY,GAChC5D,EAAOwB,IAAI,WAAYjB,EAAKQ,YAAY8C,OACxC7D,EAAOwB,IAAI,OAAQ,GACnBjB,EAAKC,oBAAoBsD,UAAUC,OAAO,aAC1CpC,EAAU3B,GACVD,EAAQiE,YAAY/C,EAAgB","sources":["src/js/news.js"],"sourcesContent":["const KEY = '834e5c777b504c48a337b01b262c10d5';\nlet timer = null;\nconst params = new URLSearchParams({\n  apiKey: KEY,\n  category: 'general',\n  country: 'ua',\n  page: 1,\n  pageSize: 10,\n});\n\nconst refs = {\n  outputNumberResults: document.querySelector('.js-output'),\n  outputCurrentResults: document.querySelector('.js-output-item'),\n  outputTotalResults: document.querySelector('.js-output-total'),\n  outputArticles: document.querySelector('.js-articles'),\n  form: document.querySelector('.form'),\n  inputSelect: document.querySelector('.form select'),\n  queryButton: document.querySelector('.form button'),\n};\nrefs.form.addEventListener('submit', onSubmitForm);\n\nfunction onSubmitForm(e) {\n  e.preventDefault();\n  refs.outputArticles.innerHTML = '';\n  params.set('category', refs.inputSelect.value);\n  params.set('page', 1);\n  refs.outputNumberResults.classList.remove('is-hidden');\n  findFetch(params);\n  timer = setInterval(infiniteScroll, 300);\n}\n// функція безперервного скрола\nfunction infiniteScroll() {\n  const heightWindow = window.innerHeight;\n  const positionY = window.scrollY;\n  const maxY = refs.outputArticles.clientHeight;\n  if ((maxY - positionY < 1.7 * heightWindow) & (positionY > heightWindow)) {\n    params.set('page', Number(params.get('page')) + 1);\n    // console.log(params.toString());\n\n    findFetch(params);\n  }\n}\n\nfunction findFetch(params) {\n  fetch(`https://newsapi.org/v2/top-headlines?${params}`).then(response =>\n    response.json().then(data => fetchData(data))\n  );\n}\n\nfunction fetchData(items) {\n  currentItems =\n    items.articles.length + (params.get('page') - 1) * params.get('pageSize');\n  outputTotalResults(currentItems, items.totalResults);\n\n  renderArticles(items.articles);\n  const isInterval = currentItems >= items.totalResults;\n\n  // console.log(isInterval);\n  if (isInterval) {\n    clearInterval(timer);\n  }\n}\n// виводить поточну кількість результатів і максимальну кількість результатів\nfunction outputTotalResults(currentResults, numberResults) {\n  refs.outputCurrentResults.textContent = currentResults;\n  numberResults ? (refs.outputTotalResults.textContent = numberResults) : null;\n}\n// рендер новин на сторінку\nfunction renderArticles(articles) {\n  const makeArticles = articles.reduce(\n    (acc, article) => acc + makeArticle(article),\n    ''\n  );\n  refs.outputArticles.insertAdjacentHTML('beforeend', makeArticles);\n}\n// створює розмітку однієї новини\nfunction makeArticle({\n  title,\n  author,\n  urlToImage,\n  description,\n  publishedAt,\n  url,\n}) {\n  return `\n  <li class=\"list__item\">\n    <a class=\"list__link\" href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n      ${\n        urlToImage ? `<img src=\"${urlToImage}\" alt=\"${description}\"></img>` : ''\n      }\n      <h2>${title}</h2>\n      <p><b>Author</b>: ${author}</p>\n      <p><b>Published Date</b>: ${publishedAt}</p>\n\n    </a>\n  </li>`;\n}\n"],"names":["$4ebb81a1f389e6fd$var$timer","$4ebb81a1f389e6fd$var$params","URLSearchParams","apiKey","category","country","page","pageSize","$4ebb81a1f389e6fd$var$refs","outputNumberResults","document","querySelector","outputCurrentResults","outputTotalResults","outputArticles","form","inputSelect","queryButton","$4ebb81a1f389e6fd$var$infiniteScroll","heightWindow","window","innerHeight","positionY","scrollY","clientHeight","set","Number","get","$4ebb81a1f389e6fd$var$findFetch","params1","fetch","then","response","json","data","items","currentItems","articles","length","currentResults","numberResults","totalResults","textContent","makeArticles","reduce","acc","article","title","author","urlToImage","description","publishedAt","url","$4ebb81a1f389e6fd$var$makeArticle","insertAdjacentHTML","$4ebb81a1f389e6fd$var$renderArticles","clearInterval","$4ebb81a1f389e6fd$var$fetchData","addEventListener","e","preventDefault","innerHTML","value","classList","remove","setInterval"],"version":3,"file":"news.b13202d7.js.map"}