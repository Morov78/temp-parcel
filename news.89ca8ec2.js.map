{"mappings":"YAAA,IACIA,EAAQ,KACNC,EAAS,IAAIC,gBAAgB,CACjCC,OAHU,mCAIVC,SAAU,UACVC,QAAS,KACTC,KAAM,EACNC,SAAU,KAGNC,EAAO,CACXC,oBAAqBC,SAASC,cAAc,cAC5CC,qBAAsBF,SAASC,cAAc,mBAC7CE,mBAAoBH,SAASC,cAAc,oBAC3CG,eAAgBJ,SAASC,cAAc,gBACvCI,KAAML,SAASC,cAAc,SAC7BK,YAAaN,SAASC,cAAc,gBACpCM,YAAaP,SAASC,cAAc,iBAcZ,SAAjBO,IACP,IAAMC,EAAeC,OAAOC,YACtBC,EAAYF,OAAOG,QACZf,EAAKM,eAAeU,aACrBF,EAAY,IAAMH,EAAiBG,EAAYH,IACzDlB,EAAOwB,IAAI,OAAQC,OAAOzB,EAAO0B,IAAI,SAAW,GAGhDC,EAAU3B,IAId,SAAS2B,EAAUC,GACjBC,MAAM,wCAA+CC,OAAPF,IAAUG,MAAK,SAAAC,G,OAC3DA,EAASC,OAAOF,MAAK,SAAAG,G,OAINC,EAJwBD,EAKzCE,aACED,EAAME,SAASC,QAAUtC,EAAO0B,IAAI,QAAU,GAAK1B,EAAO0B,IAAI,YAYtCa,EAXPH,aAWuBI,EAXTL,EAAMM,aAYvClC,EAAKI,qBAAqB+B,YAAcH,EACxCC,IAAiBjC,EAAKK,mBAAmB8B,YAAcF,GAGjCH,EAdPF,EAAME,SAefM,EAAeN,EAASO,QAC5B,SAACC,EAAKC,G,OAAYD,GAOpBE,GADmBC,EANmBF,GAOtCC,MACAE,EAFmBD,EAEnBC,OACAC,EAHmBF,EAGnBE,WACAC,EAJmBH,EAInBG,YACAC,EALmBJ,EAKnBI,YACAC,EANmBL,EAMnBK,IAEO,gEAIDvB,OAF0BuB,EAAI,wDAI1BvB,OAFJoB,EAAa,aAAiCpB,OAApBoB,EAAW,WAAqBpB,OAAZqB,EAAY,YAAY,GACvE,gBAEmBrB,OADdiB,EAAM,mCAEgBjB,OADRmB,EAAO,0CACanB,OAAZsB,EAAY,8BAhB9C,IAAqBJ,EACnBD,EACAE,EACAC,EACAC,EACAC,EACAC,IAXE,IAEF9C,EAAKM,eAAeyC,mBAAmB,YAAaX,QAlBjCP,cAAgBD,EAAMM,cAIvCc,cAAcxD,IAVlB,IAAmBoC,EAmBKE,EAChBM,EANoBJ,EAAgBC,QA5C5CjC,EAAKO,KAAK0C,iBAAiB,UAE3B,SAAsBC,GACpBA,EAAEC,iBACFnD,EAAKM,eAAe8C,UAAY,GAChC3D,EAAOwB,IAAI,WAAYjB,EAAKQ,YAAY6C,OACxC5D,EAAOwB,IAAI,OAAQ,GACnBjB,EAAKC,oBAAoBqD,UAAUC,OAAO,aAC1CnC,EAAU3B,GACVD,EAAQgE,YAAY9C,EAAgB,Q","sources":["src/js/news.js"],"sourcesContent":["const KEY = '834e5c777b504c48a337b01b262c10d5';\nlet timer = null;\nconst params = new URLSearchParams({\n  apiKey: KEY,\n  category: 'general',\n  country: 'ua',\n  page: 1,\n  pageSize: 10,\n});\n\nconst refs = {\n  outputNumberResults: document.querySelector('.js-output'),\n  outputCurrentResults: document.querySelector('.js-output-item'),\n  outputTotalResults: document.querySelector('.js-output-total'),\n  outputArticles: document.querySelector('.js-articles'),\n  form: document.querySelector('.form'),\n  inputSelect: document.querySelector('.form select'),\n  queryButton: document.querySelector('.form button'),\n};\nrefs.form.addEventListener('submit', onSubmitForm);\n\nfunction onSubmitForm(e) {\n  e.preventDefault();\n  refs.outputArticles.innerHTML = '';\n  params.set('category', refs.inputSelect.value);\n  params.set('page', 1);\n  refs.outputNumberResults.classList.remove('is-hidden');\n  findFetch(params);\n  timer = setInterval(infiniteScroll, 300);\n}\n// функція безперервного скрола\nfunction infiniteScroll() {\n  const heightWindow = window.innerHeight;\n  const positionY = window.scrollY;\n  const maxY = refs.outputArticles.clientHeight;\n  if ((maxY - positionY < 1.7 * heightWindow) & (positionY > heightWindow)) {\n    params.set('page', Number(params.get('page')) + 1);\n    // console.log(params.toString());\n\n    findFetch(params);\n  }\n}\n\nfunction findFetch(params) {\n  fetch(`https://newsapi.org/v2/top-headlines?${params}`).then(response =>\n    response.json().then(data => fetchData(data))\n  );\n}\n\nfunction fetchData(items) {\n  currentItems =\n    items.articles.length + (params.get('page') - 1) * params.get('pageSize');\n  outputTotalResults(currentItems, items.totalResults);\n\n  renderArticles(items.articles);\n  const isInterval = currentItems >= items.totalResults;\n\n  // console.log(isInterval);\n  if (isInterval) {\n    clearInterval(timer);\n  }\n}\n// виводить поточну кількість результатів і максимальну кількість результатів\nfunction outputTotalResults(currentResults, numberResults) {\n  refs.outputCurrentResults.textContent = currentResults;\n  numberResults ? (refs.outputTotalResults.textContent = numberResults) : null;\n}\n// рендер новин на сторінку\nfunction renderArticles(articles) {\n  const makeArticles = articles.reduce(\n    (acc, article) => acc + makeArticle(article),\n    ''\n  );\n  refs.outputArticles.insertAdjacentHTML('beforeend', makeArticles);\n}\n// створює розмітку однієї новини\nfunction makeArticle({\n  title,\n  author,\n  urlToImage,\n  description,\n  publishedAt,\n  url,\n}) {\n  return `\n  <li class=\"list__item\">\n    <a class=\"list__link\" href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n      ${\n        urlToImage ? `<img src=\"${urlToImage}\" alt=\"${description}\"></img>` : ''\n      }\n      <h2>${title}</h2>\n      <p><b>Author</b>: ${author}</p>\n      <p><b>Published Date</b>: ${publishedAt}</p>\n\n    </a>\n  </li>`;\n}\n"],"names":["$963508ebb68a0a78$var$timer","$963508ebb68a0a78$var$params","URLSearchParams","apiKey","category","country","page","pageSize","$963508ebb68a0a78$var$refs","outputNumberResults","document","querySelector","outputCurrentResults","outputTotalResults","outputArticles","form","inputSelect","queryButton","$963508ebb68a0a78$var$infiniteScroll","heightWindow","window","innerHeight","positionY","scrollY","clientHeight","set","Number","get","$963508ebb68a0a78$var$findFetch","params1","fetch","concat","then","response","json","data","items","currentItems","articles","length","currentResults","numberResults","totalResults","textContent","makeArticles","reduce","acc","article","title","param","author","urlToImage","description","publishedAt","url","insertAdjacentHTML","clearInterval","addEventListener","e","preventDefault","innerHTML","value","classList","remove","setInterval"],"version":3,"file":"news.89ca8ec2.js.map"}